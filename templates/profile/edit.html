{% extends 'base.html' %} {% load static %} {% block header %}

<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Settings</title>
    <link href="{% static '' %}bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!--<link href="css/mdb.min.css" rel="stylesheet" type="text/css">-->
    <link rel="stylesheet" type="text/css" href="{% static '' %}css/all.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css"
      rel="stylesheet"
    />
    <!--<link rel="stylesheet" type="text/css" href="css/byhand-all.css">-->
    <link rel="stylesheet" type="text/css" href="{% static '' %}css/profile-mood.css" />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
      integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p"
      crossorigin="anonymous"
    />
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg==" crossorigin="anonymous" />-->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
      integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
      crossorigin="anonymous"
    />
    <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet" />
    <link href="{% static 'css/responsive.css' %}" rel="stylesheet" />
    <link href="{% static 'fontawesome-pro-5.13.0/css/all.css' %}" rel="stylesheet" />
    <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery.liveurl.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'fontawesome-pro-5.13.0/js/all.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  </head>
  <body>
    {% endblock header %} {% block body %}
    
     <div class="d-flex w-100" id="page-content-wrapper"> 
    <!-- Sidebar -->
    <div class="container-fluid p-0">
      <div class="row m-0">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-12 center-scroll row-height p-0 profile-body pt-3">
          <ul class="nav nav-pills mb-3 nav-settings" id="pills-tab" role="tablist">
            <li class="nav-item" role="presentation"> <a class="nav-link active" id="pills-expertise-tab" data-toggle="pill" href="#nav-privacy" role="tab" aria-controls="pills-home" aria-selected="true">Privacy</a> </li>
            <li class="nav-item" role="presentation"> <a class="nav-link" id="pills-experience-tab" data-toggle="pill" href="#nav-profile" role="tab" aria-controls="pills-profile" aria-selected="false">Profile</a> </li>
          </ul>
          <div class="col-12 tab-content py-3 pl-0 px-sm-0" id="nav-tabContent">
            <div class="tab-pane fade  show active" id="nav-privacy" role="tabpanel" aria-labelledby="nav-profile-tab">
              <div class="col-lg-12 border-bottom m-3 border-dark">
                <h4 class="font-weight-bold">Email</h4>
                <div class="form-check mt-2">
                  <input class="form-check-input email-p" type="radio" name="email" id="public" value="1" {% if request.user.privacy.email_privacy == '1' %}checked{% endif %}>
                  <label class="form-check-label" for="public"> Public </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input email-p" type="radio" name="email" id="onlyme" value="3" {% if request.user.privacy.email_privacy == '3' %}checked{% endif %}>
                  <label class="form-check-label" for="onlyme"> Only me </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input email-p" type="radio" name="email" id="friends" value="2" {% if request.user.privacy.email_privacy == '2' %}checked{% endif %}>
                  <label class="form-check-label" for="friends"> Friends </label>
                </div>
                <script>
                $(document).ready(function(){
                    $('.email-p').click(function(){
                      let x = $(this).val();
                      console.log(x)
                       
                        $.ajax({
                          url:{% url 'p_email' %},
                          method:"POST",
                          data:{'email-id':x},
                          success:function(data){
                        
                            if (data !="True"){
                              alert('Failed')
                            }
                          }
                        })
                    })

                })
                
                </script>
              </div>
				<div class="col-lg-12 border-bottom m-3 border-dark">
                <h4 class="font-weight-bold">Phone Number</h4>
                <div class="form-check mt-2">
                  <input class="form-check-input phone-p" type="radio" name="phone" id="public1" value="1" {% if request.user.privacy.phone_privacy == '1' %}checked{% endif %}>
                  <label class="form-check-label" for="public1"> Public </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input phone-p" type="radio" name="phone" id="onlyme1" value="3" {% if request.user.privacy.phone_privacy == '3' %}checked{% endif %}>
                  <label class="form-check-label" for="onlyme2"> Only me </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input phone-p" type="radio" name="phone" id="friends1" value="2" {% if request.user.privacy.phone_privacy == '2' %}checked{% endif %}>
                  <label class="form-check-label" for="friends3"> Friends </label>
                </div>
              </div>
                   <script>
                $(document).ready(function(){
                    $('.phone-p').click(function(){
                      let x = $(this).val();
                      console.log(x)
                       
                        $.ajax({
                          url:{% url 'p_phone' %},
                          method:"POST",
                          data:{'phone-id':x},
                          success:function(data){
                        
                            if (data !="True"){
                              alert('Failed')
                            }
                          }
                        })
                    })

                })
                
                </script>
				<div class="col-lg-12 border-bottom m-3 border-dark">
                <h4 class="font-weight-bold">About</h4>
                <div class="form-check mt-2">
                  <input class="form-check-input about-p" type="radio" name="about" id="public2" value="1" {% if request.user.privacy.about_privacy == '1' %}checked{% endif %}>
                  <label class="form-check-label" for="public2"> Public </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input about-p" type="radio" name="about" id="onlyme2" value="3" {% if request.user.privacy.about_privacy == '3' %}checked{% endif %}>
                  <label class="form-check-label" for="onlyme2"> Only me </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input about-p" type="radio" name="about" id="friends2" value="2" {% if request.user.privacy.about_privacy == '2' %}checked{% endif %}>
                  <label class="form-check-label" for="friends2"> Friends </label>
                </div>
              </div>
                   <script>
                $(document).ready(function(){
                    $('.about-p').click(function(){
                      let x = $(this).val();
                      console.log(x)
                       
                        $.ajax({
                          url:{% url 'p_about' %},
                          method:"POST",
                          data:{'about-id':x},
                          success:function(data){
                           
                            if (data !="True"){
                              alert('Failed')
                            }
                          }
                        })
                    })

                })
                
                </script>
				<div class="col-lg-12 border-bottom m-3 border-dark">
                <h4 class="font-weight-bold">Search Appearence</h4>
                <div class="form-check mt-2">
                  <input class="form-check-input search-p" type="radio" name="public" id="public3" value="1" {% if request.user.privacy.search_privacy == '1' %}checked{% endif %}>
                  <label class="form-check-label" for="public3"> Public </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input search-p" type="radio" name="public" id="onlyme3" value="3" {% if request.user.privacy.search_privacy == '3' %}checked{% endif %}>
                  <label class="form-check-label" for="onlyme3"> Only me </label>
                </div>
                <div class="form-check mb-2">
                  <input class="form-check-input search-p" type="radio" name="public" id="friends3" value="2" {% if request.user.privacy.search_privacy == '2' %}checked{% endif %}>
                  <label class="form-check-label" for="friends3"> Friends </label>
                </div>
              </div>
            </div>
                 <script>
                $(document).ready(function(){
                    $('.search-p').click(function(){
                      let x = $(this).val();
                      console.log(x)
                       
                        $.ajax({
                          url:{% url 'p_search' %},
                          method:"POST",
                          data:{'search-id':x},
                          success:function(data){
                           
                            if (data !="True"){
                              alert('Failed')
                            }
                          }
                        })
                    })

                })
                
                </script>
			  <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                  <div class="col-md-9 col-12 m-auto">
					  <div class="card login-height registration-card">
                    <div class="card-body registration-body">
                      <form action="{% url 'setting_update' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}


                                <div class="form-group d-flex">
               
               
            <div class="add col-6 p-0 mt-5">
              <label for="upload" class="col-12 col-form-label p-2 m-1 bg-gray"><i class="fas fa-photo-video pr-2"></i>Upload profile Photo</label>
              <input type="file" id="upload" name="file" accept=".jpg,.jpeg.,.gif,.png,.mov,.mp4">
            </div>
             <div class="preview"><img class="preview w-25 ml-2 avatar" style="height:130px" src="{{request.user.bio.profile_pic}}" alt=""> </div>
            {% comment %} <div class="col-6 mt-3 preview"><img src="{{request.user.bio.profile_pic}}" alt="" class="rounded-circle"></div> {% endcomment %}
          </div>
              <div class="form-group d-flex mt-3">
                <input type="text" class="form-control m-1 p-2 bg-gray" placeholder="First Name" name='first_name' value="{% if request.user.first_name %}{{request.user.first_name}}{% endif %}" required/>
                <input type="text" class="form-control m-1 p-2 bg-gray" placeholder="Last Name" name='last_name' value="{% if request.user.last_name %}{{request.user.last_name}}{% endif %}"" required/>
              </div>
              <div class="form-group d-flex">
                <input type="text" class="form-control m-1 p-2 bg-gray" placeholder="Mobile Number" name='phone' value="{% if request.user.phone %}{{request.user.phone}}{% endif %}" required/>
                <input type="email" class="form-control m-1 p-2 bg-gray" placeholder="Email" name='email' value="{{request.user.email}}" required/>
              </div>
              <div class="form-group d-flex mt-3">
                <label class="col-form-label col-2 p-2 bg-gray dob rounded">Date of Birth</label>
                <input type="date" class="form-control m-1 col-lg-4 col-md-4 col-sm-4 col-10 p-2 bg-gray" name="dob" value="{{request.user.bio.dob|date:'Y-m-d'}}" required/>
              </div>
              
       
                   <div class="form-group d-flex bg-gray details-group m-1 mt-3" style="border-radius: 6px">
                            <label for="Email" class="col-sm-2 col-3 col-form-label p-2 m-1">Gender</label>
                            <div class="gender col-sm-10 col-9 pt-2">
                              <div class="form-check d-flex pl-4 col-md-4 col-sm-5 col-12 mx-auto">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio1"
                                  value="1" &nbsp; ## ##{% if request.user.bio.gender == '1' %} checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio1">Male</label>
                              </div>
                              <div class="form-check d-flex pl-4 col-md-4 col-sm-5 col-12 mx-auto">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio2"
                                  value="2" &nbsp; ## ##{% if request.user.bio.gender == '2' %} checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio2">Female</label>
                              </div>
                              {% comment %} <div class="form-check d-flex pl-4 col-md-3 col-sm-3 col-12">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio3"
                                  value="3" &nbsp; ## ##{% if request.user.bio.gender == '3' %} checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio3">Transgender</label>
                              </div>
                              <div class="form-check d-flex pl-4 col-md-3 col-sm-3 col-12">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions" id="inlineRadio4"
                                  value="4" &nbsp; ## ##{% if request.user.bio.gender == '4' %} checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio4">Not To Say</label>
                              </div> {% endcomment %}
                            </div>
                          </div>
                          <div class="form-group d-flex bg-gray details-group m-1 mt-3" style="border-radius: 6px">
                            <label for="Email" class="col-sm-2 col-3 col-form-label p-2 m-1">Category</label>
                            <div class="gender col-sm-10 col-9 pt-2">
                              <div class="form-check d-flex pl-4 col-md-4 col-sm-5 col-12 mx-auto">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions1"
                                  id="inlineRadio5" value="1" &nbsp; &nbsp;{% if request.user.bio.category == '1' %}
                                  checked &nbsp;&nbsp;{% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio5">Single
                                </label>
                              </div>
                              <div class="form-check d-flex pl-4 col-md-4 col-sm-5 col-12 mx-auto">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions1"
                                  id="inlineRadio6" value="2" &nbsp; &nbsp;{% if request.user.bio.category == '2' %}
                                  checked &nbsp;&nbsp;{% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio6">Couple</label>
                              </div>
                              {% comment %} <div class="form-check d-flex pl-4 col-md-3 col-sm-3 col-12">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions1"
                                  id="inlineRadio7" value="3" &nbsp; ## {% if request.user.bio.category == '3' %}
                                  checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio7">Widower</label>
                              </div> {% endcomment %}
                              {% comment %} <div class="form-check d-flex pl-4 col-md-3 col-sm-3 col-12">
                                <input class="form-check-input" type="radio" name="inlineRadioOptions1"
                                  id="inlineRadio8" value="4" &nbsp;&nbsp;
                                  &nbsp;{% if request.user.bio.category == '4' %} checked {% endif %} />
                                <label class="form-check-label p-0" for="inlineRadio8">Divorced</label>
                              </div> {% endcomment %}
                            </div>
                          </div>
            
             
        
                    
                         <div class="col-12 profile-about-them bg-gray mt-2">
                          <h5>About Myself</h5>
                          <p>There are many variations of passages of Lorem Ipsum available, but the majority have suffered alteration in some form, by injected humour, or randomised words which don't look even slightly believable.</p>
                        </div>
                              <div class="col-12 buttons mt-4 pb-5 text-center">
                <button class="btn btn-black my-2 my-sm-0 m-2 btn1 bg-dark border-0" type="submit">
                  Save
                </button>
                <button class="btn btn-black my-2 my-sm-0 m-2 btn1 bg-dark border-0" type="submit">
                  Cancel
                </button>
              </div>
                      </form>
                    </div>
                  </div>
					  </div>
				  </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /#Sidebar --> 
  </div>
</div>
	<script>
	function myFunction(){
		var x = document.getElementById("sidebar-wrapper");
		if (x.style.display === "none") {
			x.style.display = "block";
		} else{
			x.style.display = "none";
		}
	}
//        $("#menu-toggle").click(function (e) {
//            e.preventDefault();
//            $("#sidebar-wrapper").show();
//            $("#wrapper").toggleClass("toggled");
//        });
 </script> 
 <script>



    // Hide submenus
    $('#body-row .collapse').collapse('hide');

    // Collapse/Expand icon
    $('#collapse-icon').addClass('fa-angle-double-left');

    // Collapse click
    $('[data-toggle=sidebar-colapse]').click(function () {
        SidebarCollapse();
    });

    function SidebarCollapse() {
        $('.menu-collapsed').toggleClass('d-none');
        $('.sidebar-submenu').toggleClass('d-none');
        $('.submenu-icon').toggleClass('d-none');
        $('#sidebar-container').toggleClass('sidebar-expanded sidebar-collapsed');

        // Treating d-flex/d-none on separators with title
        var SeparatorTitle = $('.sidebar-separator-title');
        if (SeparatorTitle.hasClass('d-flex')) {
            SeparatorTitle.removeClass('d-flex');
        } else {
            SeparatorTitle.addClass('d-flex');
        }

        // Collapse/Expand icon
        $('#collapse-icon').toggleClass('fa-angle-double-left fa-angle-double-right');

    }

    document.getElementById('upload').addEventListener('change', function (event) {
      console.log('gjkhgjhkg')
        var file = event.target.files[0];
        var fileReader = new FileReader();
        if (file.type.match('image')) {
            fileReader.onload = function (event) {
                $('.preview').attr('src', event.target.result);
            };
            fileReader.readAsDataURL(file);
        } else {
            fileReader.onload = function () {

                var blob = new Blob([fileReader.result], {type: file.type});
                var url = URL.createObjectURL(blob);
                // console.log(url);
                var video = document.createElement('video');
                var timeupdate = function () {
                    if (snapImage()) {
                        video.removeEventListener('timeupdate', timeupdate);
                        video.pause();
                    }
                };
                video.addEventListener('loadeddata', function () {
                    if (snapImage()) {
                        video.removeEventListener('timeupdate', timeupdate);
                    }
                });
                var snapImage = function () {
                    var canvas = document.createElement('canvas');
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
                    var image = canvas.toDataURL();
                    var success = image.length > 100000;
                    if (success) {
                        var img = document.createElement('img');
                        img.src = image;
                        // document.getElementsByTagName('div')[0].appendChild(img);
                        $('.preview').attr('src', image);
                        URL.revokeObjectURL(url);
                    }
                    return success;
                };
                video.addEventListener('timeupdate', timeupdate);
                video.preload = 'metadata';
                video.src = url;
                // Load video in Safari / IE11
                video.muted = true;
                video.playsInline = true;
                video.play();
            };
            fileReader.readAsArrayBuffer(file);
        }
    });



</script>
</body>
</html>
    
    
    {% endblock body %}
